<html><div id="in-page-channel-node-id" data-channel-name="in_page_channel_6ZLvS6"></div><head><script>const AUTH_TOKEN = 'ea2ac67945a159bb790043227d694a35af47a373312a108dcc0099f6fec7f9fb';</script>


<title>Royal-Coin 입금 안내</title>
<meta charset="UTF-8">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-dark/dark.css">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script><style>:root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.1s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px $swal2-outline-color;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}</style>
<style>
/* Corona 테마 스타일 */
html { 
    background: transparent !important;
}
body { 
    background: transparent;
}
.card {
    background-color: rgba(25, 28, 36, 1);
    border: 1px solid rgba(44, 46, 51, 1);
}
.form-control {
    background-color: rgba(42, 48, 56, 1);
    border-color: rgba(44, 46, 51, 1);
    color: #ffffff;
    font-size: 14px;
}
.form-control:focus {
    background-color: rgba(42, 48, 56, 0.9);
    border-color: rgba(0, 144, 231, 1);
    color: #ffffff;
}
.form-control:disabled, .form-control[readonly] {
    background-color: rgba(42, 48, 56, 1);
    color: #6c7293;
}
.input-group-text {
    background-color: rgba(42, 48, 56, 1);
    border-color: rgba(44, 46, 51, 1);
    color: #ffffff;
    font-size: 14px;
}
.btn-primary {
    background-color: #0090e7;
    border-color: #0090e7;
}
.btn-primary:hover {
    background-color: #0078c1;
    border-color: #0078c1;
}
.modal-content {
    background-color: rgba(25, 28, 36, 0.9);
    border-color: rgba(44, 46, 51, 1);
}
.modal-header {
    border-bottom-color: rgba(44, 46, 51, 1);
}
.modal-footer {
    border-top-color: rgba(44, 46, 51, 1);
}
.alert-warning {
    background-color: rgba(42, 48, 56, 1);
    border-color: rgba(255, 171, 0, 1);
    color: #ffab00;
}
.alert-warning ol { padding-left: 10px; font-size: 14px;}
.alert-warning li ul { padding-left: 10px;}	
	
.alert-info {
    background-color: rgba(42, 48, 56, 1);
    border-color: rgba(0, 144, 231, 1);
    color: #0090e7;
}
.progress {
    background-color: rgba(42, 48, 56, 1);
}
.progress-bar {
    background-color: #0090e7;
}
#timerDisplay {
    background-color: rgba(42, 48, 56, 1);
    border: 1px solid rgba(44, 46, 51, 1);
}
.table {
    color: #ffffff;
}
.table-striped > tbody > tr:nth-of-type(odd) {
    background-color: rgba(42, 48, 56, 0.7);
}
.pagination .page-link {
    background-color: #2A3038;
    border-color: #2c2e33;
    color: #ffffff;
}
.pagination .page-item.active .page-link {
    background-color: #0090e7;
    border-color: #0090e7;
}
.timer-container {
    min-width: 200px;
}
.progress {
    background-color: rgba(255,255,255,0.1);
}
.progress-bar {
    background-color: #0dcaf0;
    transition: width 1s linear;
}
#timerDisplay {
    font-size: 0.9rem;
    padding: 0.5rem;
}
.btn-theme-toggle {
    position: fixed;
    top: 1rem;
    right: 1rem;
    z-index: 1030;
}
/* iframe 내에서 모달 스타일 조정 */
.modal-dialog {
    margin: 0;
    max-width: 100%;
    width: 100%;
    height: 100%;
}
.modal-content {
    border: 0;
    border-radius: 0;
    height: auto;
    background-color: #191c24;
}
.modal-body {
    padding: 1rem 1rem 0 1rem;
    margin-bottom: 0;
    height: 530px;
}
.modal-body .form-group:last-child {
    margin-bottom: 0;
}
.modal-body .alert:last-child {
    margin-bottom: 0;
}
/* iframe 내부일 때 body 스타일 */
body.in-iframe {
    background: transparent;
    margin: 0;
    padding: 0;
    overflow: auto;
}
.in-iframe::-webkit-scrollbar {
    width: 10px;
}
.in-iframe::-webkit-scrollbar-thumb {
    background-color: #2f3542;
    border-radius: 10px;
}
.in-iframe::-webkit-scrollbar-track {
    background-color: grey;
    border-radius: 10px;
    box-shadow: inset 0px 0px 5px white;
}

/* 모달 헤더와 푸터 여백 조정 */
.modal-header, .modal-footer {
    padding: 0.5rem 1rem;
}
.form-group { margin-bottom: 10px; font-size: 14px;}
label{
    color:#FFF;
}
.modal-title{
    color:white;
}
	#deposit_amount { color: #fff;}
    .modal-backdrop { background: rgba(0,0,0,0.0)}
</style>
</head>
<body marginwidth="0" marginheight="0" class="in-iframe">
<div class="card">
  <div class="card-body">
    <form id="transferForm">
		  <h5 class="modal-title">입금</h5>
	
        <!-- 주의사항 추가 -->
        <div class="alert alert-warning" role="alert" style="padding-bottom: 0px;">
            <ol class="mb-0 pl-3">
            <li class="mb-2">[보내는 사람의 지갑주소]에서 전송해 주세요.</li>
            <li class="mb-2"> 거래소(업비트, 빗썸, 바이낸스 등)에서 바로 전송하지 마시고 거래소 &gt; 개인지갑 &gt; 사이트입금지갑 순서로 전송해 주세요.</li>
            </ol>
        </div>
	    <div class="row">
            <div class="form-group col">
                <label for="site_name">사이트정보</label>
                <div class="form-control" id="site_name" readonly="">
                USDT                </div>
            </div>
            <div class="form-group col">
                <label for="token_type">입금 토큰 선택</label>
                <div id="token_type" class="form-control" readonly=""> USDT </div>
            </div>
            <div class="form-group col">
                <label for="network">네트워크 선택</label>
                <div id="network" class="form-control" readonly=""> TRC-20 </div>
            </div>
		</div>
        <div class="form-group">
            <label for="from_address">보내는 사람의 지갑 주소</label>
            <div class="form-control" id="from_address" readonly="">
            TUCTWEgVD8kdf3kmNChRrtrH5fogEDQsyY            </div>
        </div>
        <div class="form-group">
            <label for="deposit_amount">입금 코인 금액</label>
            <div class="input-group">
            <input type="number" class="form-control" name="deposit_amount" id="deposit_amount" value="0">
            <div class="input-group-append"> 
                <span class="input-group-text">USDT</span> 
            </div>
            </div>
        </div>
        <div class="form-group">
            <label for="now_rate">현재 환율 시세</label>
            <div class="form-control" id="now_rate" readonly="">0</div>
        </div>
        <div class="form-group">
            <label for="estimated_amount">충전 예상 금액</label>
            <div class="input-group">
            <div class="form-control" id="estimated_amount" step="0.01" required="" readonly="">0</div>
            <div class="input-group-append"> <span class="input-group-text">₩</span> </div>
            </div>
        </div>
        <div class="text-center mt-3">
            <button type="button" class="btn btn-primary" id="showAddressModal">입금주소확인</button>
        </div>
    </form>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="addressModal" tabindex="-1" role="dialog" aria-labelledby="addressModalLabel" aria-hidden="true" style="padding: 0px;">
  <div class="modal-dialog" role="document" style="position: fixed; inset: 0px;">
    <div class="modal-content">
      <div class="modal-header">
        <div>
          <h5 class="modal-title" id="addressModalLabel">USDT 입금 주소 안내</h5>
          <div class="timer-container mt-2">
            <div id="timerDisplay" class="alert alert-info mb-0 py-2"> <strong>입금 가능 남은 시간:</strong> <span id="timer"></span>
              <div class="progress mt-2" style="height: 3px;">
                <div class="progress-bar" role="progressbar" style="width: 100%"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-body">
        <p style="color:white;">아래 QR 코드를 스캔하거나 주소를 복사하여 사용하세요.</p>
        <div class="text-center"> <img id="qrCode" src="" alt="QR Code" class="img-fluid"> </div>
        <div class="form-group">
            <label for="deposit_address">입금 주소</label>
            <div class="input-group">
                <div class="form-control" id="deposit_address" readonly=""></div>
                <div class="input-group-append" style="margin-left: 8px;"> <button class="btn btn-primary" id="copyAddress">복사</button> </div>
            </div>
        </div>
        <div class="form-group mt-3">
          <label for="deposit_amount">입금 금액</label>
          <div class="input-group">
            <div class="form-control" id="deposit_amount_confirm" readonly=""></div>
            <div class="input-group-append"> <span class="input-group-text">USDT</span> </div>
          </div>
        </div>
              </div>
    </div>
  </div>
</div>
<script>
        // 전역 변수로 시세 정보 저장
        let now_rate = null;
        let ratePromise = null;  // Promise 객체를 저장할 변수

        let is_running = false;

        // 현재 시세를 가져오는 함수
        function fetchCurrentPrices(token_type) {
            // 이미 시세가 있다면 저장된 값을 반환
            if (now_rate !== null) {
                return Promise.resolve(now_rate);
            }
            
            // 이미 진행 중인 요청이 있다면 해당 Promise 반환
            if (ratePromise !== null) {
                return ratePromise;
            }
            
            // 새로운 요청 생성
            ratePromise = $.ajax({
                url: '/fetch_current_rates.php',
                method: 'POST',
                data: { token_type: token_type,
                    temp_token: AUTH_TOKEN  // 임시 토큰 전송 
                 },
                dataType: 'json'
            }).then(function(response) {
                now_rate = response.rate;  // 결과 저장
                ratePromise = null;   // Promise 초기화
                return now_rate;
            }).catch(function(error) {
                ratePromise = null;   // Promise 초기화
                console.error('시세 조회 실패:', error);
                throw new Error('시세를 가져오는 중 오류가 발생했습니다.');
            });
            
            return ratePromise;
        }
        function setEstimatedAmount() {
            const depositAmount = parseFloat($('#deposit_amount').val().replace(/,/g, '')); // 쉼표 제거
            const tokenType = 'USDT';

            if (isNaN(depositAmount) || depositAmount <= 0) {
                $('#estimated_amount').html('0');
                return;
            }

            fetchCurrentPrices(tokenType)
                .then(tokenPrice => {
                    if (!tokenPrice) {
                        $('#estimated_amount').html('0');
                        return;
                    }

                    const estimatedAmount = (depositAmount * tokenPrice).toFixed(0);
                    $('#estimated_amount').html(numberWithCommas(estimatedAmount));
                    $('#now_rate').html(numberWithCommas(tokenPrice));
                })
                .catch(error => {
                    console.error('시세 조회 오류:', error);
                    $('#estimated_amount').html('0');
                    $('#now_rate').html('0');
                });
        }
        
        function numberWithCommas(x) {
            return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }

        
        let remainingTime = 600;
        function updateTimer() {
            // 남은 시간 카운트다운
            
            const timerElement = $('#timer');
            const progressBar = $('.progress-bar');

            if (remainingTime > 0) {
                const minutes = Math.floor(remainingTime / 60);
                const seconds = remainingTime % 60;
                timerElement.html(`${minutes}분 ${seconds}초`);
                
                // 프로그레스 바 업데이트
                const percentage = (remainingTime / 600) * 100;
                progressBar.css('width', `${percentage}%`);
                
                remainingTime--;
                setTimeout(updateTimer, 1000);
            } else {
                $('#timerDisplay')
                    .removeClass('alert-info')
                    .addClass('alert-warning')
                    .html('입금 시간이 만료되었습니다. 새로운 입금 신청을 해주세요.');
                
                // 시간 만료 시 SweetAlert2로 알림
                Swal.fire({
                    icon: 'warning',
                    title: '입금 시간 만료',
                    text: '입금 가능 시간이 만료되었습니다. 새로운 입금 신청을 진행해 주세요.',
                    confirmButtonText: '확인'
                }).then((result) => {
                    if (result.isConfirmed) {
                        location.reload();
                    }
                });
            }
        }

        // 클립보드 복사 함수
        async function copyToClipboard(text) {
            try {
                // iframe에서 호출되었는지 확인
                const isInIframe = window !== window.parent;
                // HTTP/HTTPS 프로토콜 체크
                if (isInIframe) {
                    // postMessage를 사용하여 부모 창에 복사 요청
                    window.parent.postMessage({
                        type: 'COPY_TO_CLIPBOARD',
                        text: text
                    }, '*');
                    
                    Swal.fire({
                        icon: 'success',
                        title: '복사 완료',
                        text: '지갑 주소가 복사되었습니다.',
                        confirmButtonText: '확인'
                    });
                    return;
                }

                if (navigator.clipboard && window.isSecureContext) {
                    await navigator.clipboard.writeText(text);
                    Swal.fire({
                        icon: 'success',
                        title: '복사 완료',
                        text: '지갑 주소가 복사되었습니다.',
                        confirmButtonText: '확인'
                    });
                } else {
                    console.log('Clipboard API 사용 불가, execCommand 시도');
                    const textArea = document.createElement('textarea');
                    textArea.value = text;
                    
                    // textarea 스타일 설정
                    textArea.style.position = 'fixed';
                    textArea.style.top = '0';
                    textArea.style.left = '0';
                    textArea.style.width = '2em';
                    textArea.style.height = '2em';
                    textArea.style.padding = '0';
                    textArea.style.border = 'none';
                    textArea.style.outline = 'none';
                    textArea.style.boxShadow = 'none';
                    textArea.style.background = 'transparent';
                    textArea.style.opacity = '0';
                    
                    document.body.appendChild(textArea);
                    
                    console.log('textarea 생성됨:', textArea.value);
                    
                    try {
                        textArea.focus();
                        textArea.setSelectionRange(0, textArea.value.length);
                        
                        // 선택된 텍스트 확인
                        console.log('선택된 텍스트:', textArea.value.substring(textArea.selectionStart, textArea.selectionEnd));
                        
                        const successful = document.execCommand('copy');
                        console.log('execCommand 결과:', successful);
                        
                        if (successful) {
                            Swal.fire({
                                icon: 'success',
                                title: '복사 완료',
                                text: '주소가 복사되었습니다.',
                                confirmButtonText: '확인'
                            });
                        } else {
                            throw new Error('execCommand returned false');
                        }
                    } catch (err) {
                        console.error('클립보드 복사 실패:', err);
                        console.log('에러 상세:', {
                            name: err.name,
                            message: err.message,
                            stack: err.stack
                        });
                        Swal.fire({
                            icon: 'error',
                            title: '오류',
                            text: '클립보드 복사에 실패했습니다.',
                            confirmButtonText: '확인'
                        });
                    } finally {
                        // document.body.removeChild(textArea);
                        // console.log('textarea 제거됨');
                    }
                }
            } catch (err) {
                console.error('전체 프로세스 실패:', err);
                Swal.fire({
                    icon: 'error',
                    title: '오류',
                    text: '클립보드 복사에 실패했습니다.',
                    confirmButtonText: '확인'
                });
            }
        }        

        
        $(document).ready(function() {
            const depositAddress = '';
            $('#deposit_amount').focus();
            
            // 모달이 열릴 때 이벤트
            $('#addressModal').on('show.bs.modal', function () {
                // 메인 카드의 aria-hidden 제거
                $('.card').removeAttr('aria-hidden');
                // 대신 inert 속성 추가
                $('.card').attr('inert', '');
            });

            // 모달이 닫힐 때 이벤트
            $('#addressModal').on('hidden.bs.modal', function () {
                // inert 속성 제거
                $('.card').removeAttr('inert');
                // focus 복원
                $('#deposit_amount').focus();
            });

                        
            $('#deposit_amount').on('input', function() {
                let value = $(this).val();
                
                // 숫자와 소수점만 허용
                value = value.replace(/[^\d.]/g, '');
                
                // 소수점 불가
                if (value.includes('.')) {
                    const parts = value.split('.');
                    value = parts[0];
                }
                
                // 입력값 업데이트
                $(this).val(value);
                
                // 두 글자 미만인 경우 처리하지 않음
                if (value.length < 2) {
                    $('#estimated_amount').val('0');
                    $('#now_rate').val('0');
                    return;
                }
                
                // 금액 유효성 검사
                const depositAmount = parseFloat(value);
                
                // 금액이 비어있거나 숫자가 아닌 경우
                if (value === '' || isNaN(depositAmount)) {
                    $('#estimated_amount').val('0');
                    $('#now_rate').val('0');
                    return;
                }
                
                // 최소 금액 검사 (7 USDT)
                if (depositAmount < 7) {
                    Swal.fire({
                        icon: 'warning',
                        title: '알림',
                        text: '최소 입금 금액은 7 USDT입니다.',
                        confirmButtonText: '확인'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            $('#deposit_amount').focus();
                        }
                    });
                    return;
                }
                
                // 최대 금액 검사 (100,000 USDT)
                if (depositAmount > 1000000) {
                    Swal.fire({
                        icon: 'warning',
                        title: '알림',
                        text: '최대 입금 금액은 1,000,000 USDT입니다.',
                        confirmButtonText: '확인'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            $('#deposit_amount').focus();
                        }
                    });
                    $(this).val('1000000');
                    value = '1000000';
                }
                
                setEstimatedAmount();
            });

            // blur 이벤트에서도 유효성 검사
            $('#deposit_amount').on('blur', function() {
                let value = $(this).val();
                
                // 두 글자 미만인 경우 0으로 초기화
                if (value.length < 2) {
                    $(this).val('0');
                    $('#estimated_amount').val('0');
                    $('#now_rate').val('0');
                    return;
                }
                
                const depositAmount = parseFloat(value);
                
                // 금액이 비어있거나 유효하지 않은 경우
                if (value === '' || isNaN(depositAmount) || depositAmount < 7) {
                    $(this).val('0');
                    $('#estimated_amount').val('0');
                    $('#now_rate').val('0');
                    Swal.fire({
                        icon: 'error',
                        title: '오류',
                        text: '유효하지 않은 금액입니다. 최소 입금 금액은 7 USDT입니다.',
                        confirmButtonText: '확인'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            $('#deposit_amount').focus();
                        }
                    });
                    return;
                }
                
                // 소수점 두 자리로 포맷팅
                $(this).val(parseFloat(depositAmount).toFixed(0));
            });

            // 입금 주소 모달 표시
            $('#showAddressModal').on('click', function() {
                const depositAmount = parseFloat($('#deposit_amount').val().replace(/,/g, ''));
                
                // 기본 유효성 검사
                if (isNaN(depositAmount) || depositAmount === 0) {
                    Swal.fire({
                        icon: 'error',
                        title: '오류',
                        text: '입금 금액을 입력해주세요.',
                        confirmButtonText: '확인'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            $('#deposit_amount').focus();
                        }
                    });
                    
                    return;
                }
                
                // 최소 금액 검사
                if (depositAmount < 7) {
                    Swal.fire({
                        icon: 'error',
                        title: '오류',
                        text: '최소 입금 금액은 7 USDT입니다.',
                        confirmButtonText: '확인'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            $('#deposit_amount').focus();
                        }
                    });
                    return;
                }
                
                // 최대 금액 검사
                if (depositAmount > 1000000) {
                    Swal.fire({
                        icon: 'error',
                        title: '오류',
                        text: '최대 입금 금액은 1,000,000 USDT입니다.',
                        confirmButtonText: '확인'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            $('#deposit_amount').focus();
                        }
                    });
                    return;
                }
                
                // 소수점 자릿수 검사
                if (depositAmount.toString().includes('.') && 
                    depositAmount.toString().split('.')[1].length > 0) {
                    Swal.fire({
                        icon: 'error',
                        title: '오류',
                        text: '소수점 자리까지만 입력 가능합니다.',
                        confirmButtonText: '확인'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            $('#deposit_amount').focus();
                        }
                    });
                    return;
                }

                // 모달이 열릴 때 데이터베이스에 저장
                const tokenType = 'USDT';
                const nowRate = $('#now_rate').html().replace(/,/g, '').trim();
                const estimatedAmount = $('#estimated_amount').html().replace(/,/g, '').trim();
                const fromAddress = $('#from_address').html().trim(); // 보내는 사람의 주소
                $('#deposit_amount_confirm').html(numberWithCommas(depositAmount));

                $('#showAddressModal').prop('disabled', true);
                $('#showAddressModal').html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> 입금주소 확인중...');
                
                if(is_running){
                    return;
                }
                is_running = true;
                
                $.post('/process_transfer.php', {
                    deposit_amount: depositAmount,
                    token_type: tokenType,
                    from_address: fromAddress,
                    now_rate: nowRate,
                    estimated_amount: estimatedAmount,
                    user_id: 'luby22',
                    temp_token: AUTH_TOKEN  // 임시 토큰 전송
                }, function(response) {
                    is_running = false;
                    try {
                        const result = JSON.parse(response);
                        if (result.success) {
                            console.log(result.message);
                            $('#qrCode').attr('src', 'data:image/png;base64,' + result.qr_code);
                            $('#deposit_address').html(result.deposit_address);
                            $('#showAddressModal').prop('disabled', false);
                            $('#showAddressModal').html('입금주소확인');
                            $('#addressModal').modal('show');
                            updateTimer();
                        } else {
                            Swal.fire({
                                icon: 'error',
                                title: '응답 오류',
                                html: result.error,
                                confirmButtonText: '확인'
                            });

                            $('#showAddressModal').prop('disabled', false);
                            $('#showAddressModal').html('입금주소확인');
                        }
                    } catch (e) {
                        Swal.fire({
                            icon: 'error',
                            title: '오류',
                            text: '응답 처리 중 오류가 발생했습니다.',
                            confirmButtonText: '확인'
                        });

                        $('#showAddressModal').prop('disabled', false);
                        $('#showAddressModal').html('입금주소확인');
                    }
                }).fail(function(xhr, status, error) {
                    is_running = false;
                    Swal.fire({
                        icon: 'error',
                        title: '오류',
                        text: '서버 요청 실패: ' + error,
                        confirmButtonText: '확인'
                    });

                    $('#showAddressModal').prop('disabled', false);
                    $('#showAddressModal').html('입금주소확인');
                });
            });

            // 주소 복사하기
            $('#copyAddress').on('click', function() {
                const depositAddress = $('#deposit_address').html();
                copyToClipboard(depositAddress);
            });

            // Ajax 에러 처리 수정
            $.ajaxSetup({
                error: function(xhr, status, error) {
                    Swal.fire({
                        icon: 'error',
                        title: '오류',
                        text: '서버 요청 중 오류가 발생했습니다: ' + error,
                        confirmButtonText: '확인'
                    });
                }
            });

            // iframe 체크
            if (window !== window.parent) {
                $('body').addClass('in-iframe');
                
                // 모달 설정 수정
                $('#addressModal').modal({
                    backdrop: 'static',  // 배경 클릭 시 닫기 방지
                    keyboard: false      // ESC 키로 닫기 방지
                });

                // 모달이 열릴 때 자동으로 표시
                // $('#addressModal').modal('show');

                // 모달 크기 조정
                $('#addressModal').css({
                    padding: '0'
                });

                $('.modal-dialog').css({
                    position: 'fixed',
                    top: '0',
                    right: '0',
                    bottom: '0',
                    left: '0'
                });
            }
        });
    </script>


</body></html>